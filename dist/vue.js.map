{"version":3,"file":"vue.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sBAAsB,+BAA+B;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;ACnGD;AACA;;AAEA;;AAEA;AACA;AACA,cAAc;AACd;AACA;;AAEA;;AAEA;AACA;AACA,oEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,OAAO;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,MAAM;AAC9B;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+FAA+F;AAC/F;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,gBAAgB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA,gEAAgE,wCAAwC;AACxG;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,4BAA4B;AAC3C,eAAe,eAAe;AAC9B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC,eAAe,gBAAgB;AAC/B,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,gBAAgB;AAC/B,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,kBAAkB;AACjC,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,QAAQ;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,0BAA0B;AACzC,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,gBAAgB;AAC/B,eAAe,kBAAkB;AACjC,eAAe,0BAA0B;AACzC,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC,eAAe,gBAAgB;AAC/B,eAAe,kBAAkB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,SAAS;AACxB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,0BAA0B;AACzC,eAAe,QAAQ;AACvB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,gDAAgD,kBAAkB;AACzG;AACA;AACA;AACA,uCAAuC,kEAAkE,sEAAsE;AAC/K;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,eAAe;AAC9B,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,SAAS;AACxB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gJAAgJ;AAChJ,6HAA6H;AAC7H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AA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","sources":["webpack://boussole/webpack/universalModuleDefinition","webpack://boussole/./node_modules/focus-options-polyfill/index.js","webpack://boussole/./node_modules/scroll-behavior-polyfill/dist/index.js","webpack://boussole/./src/Boussole.ts","webpack://boussole/./src/Core.ts","webpack://boussole/./src/types/Configuration.ts","webpack://boussole/./src/types/Direction.ts","webpack://boussole/./src/types/ElementRectangle.ts","webpack://boussole/webpack/bootstrap","webpack://boussole/webpack/runtime/compat get default export","webpack://boussole/webpack/runtime/define property getters","webpack://boussole/webpack/runtime/hasOwnProperty shorthand","webpack://boussole/webpack/runtime/make namespace object","webpack://boussole/./src/vue/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"boussole\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"boussole\"] = factory();\n\telse\n\t\troot[\"boussole\"] = factory();\n})(self, () => {\nreturn ","// focus - focusOptions - preventScroll polyfill\n(function() {\n  if (\n    typeof window === \"undefined\" ||\n    typeof document === \"undefined\" ||\n    typeof HTMLElement === \"undefined\"\n  ) {\n    return;\n  }\n\n  var supportsPreventScrollOption = false;\n  try {\n    var focusElem = document.createElement(\"div\");\n    focusElem.addEventListener(\n      \"focus\",\n      function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n      },\n      true\n    );\n    focusElem.focus(\n      Object.defineProperty({}, \"preventScroll\", {\n        get: function() {\n          // Edge v18 gives a false positive for supporting inputs\n          if (\n            navigator &&\n            typeof navigator.userAgent !== 'undefined' &&\n            navigator.userAgent &&\n            navigator.userAgent.match(/Edge\\/1[7-8]/)) {\n              return supportsPreventScrollOption = false\n          }\n\n          supportsPreventScrollOption = true;\n        }\n      })\n    );\n  } catch (e) {}\n\n  if (\n    HTMLElement.prototype.nativeFocus === undefined &&\n    !supportsPreventScrollOption\n  ) {\n    HTMLElement.prototype.nativeFocus = HTMLElement.prototype.focus;\n\n    var calcScrollableElements = function(element) {\n      var parent = element.parentNode;\n      var scrollableElements = [];\n      var rootScrollingElement =\n        document.scrollingElement || document.documentElement;\n\n      while (parent && parent !== rootScrollingElement) {\n        if (\n          parent.offsetHeight < parent.scrollHeight ||\n          parent.offsetWidth < parent.scrollWidth\n        ) {\n          scrollableElements.push([\n            parent,\n            parent.scrollTop,\n            parent.scrollLeft\n          ]);\n        }\n        parent = parent.parentNode;\n      }\n      parent = rootScrollingElement;\n      scrollableElements.push([parent, parent.scrollTop, parent.scrollLeft]);\n\n      return scrollableElements;\n    };\n\n    var restoreScrollPosition = function(scrollableElements) {\n      for (var i = 0; i < scrollableElements.length; i++) {\n        scrollableElements[i][0].scrollTop = scrollableElements[i][1];\n        scrollableElements[i][0].scrollLeft = scrollableElements[i][2];\n      }\n      scrollableElements = [];\n    };\n\n    var patchedFocus = function(args) {\n      if (args && args.preventScroll) {\n        var evScrollableElements = calcScrollableElements(this);\n        if (typeof setTimeout === 'function') {\n          var thisElem = this;\n          setTimeout(function () {\n            thisElem.nativeFocus();\n            restoreScrollPosition(evScrollableElements);\n          }, 0);\n        } else {\n          this.nativeFocus();\n          restoreScrollPosition(evScrollableElements);\n        }\n      }\n      else {\n        this.nativeFocus();\n      }\n    };\n\n    HTMLElement.prototype.focus = patchedFocus;\n  }\n})();\n","(function () {\n    'use strict';\n\n    var UNSUPPORTED_ENVIRONMENT = typeof window === \"undefined\";\n\n    /**\n     * Is true if the browser natively supports the 'scroll-behavior' CSS-property.\n     * @type {boolean}\n     */\n    var SUPPORTS_SCROLL_BEHAVIOR = UNSUPPORTED_ENVIRONMENT ? false : \"scrollBehavior\" in document.documentElement.style;\n\n    \n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __read(o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    }\n\n    function getScrollingElement() {\n        if (document.scrollingElement != null) {\n            return document.scrollingElement;\n        }\n        else {\n            return document.documentElement;\n        }\n    }\n\n    var STYLE_ATTRIBUTE_PROPERTY_NAME = \"scroll-behavior\";\n    var STYLE_ATTRIBUTE_PROPERTY_REGEXP = new RegExp(STYLE_ATTRIBUTE_PROPERTY_NAME + \":\\\\s*([^;]*)\");\n    /**\n     * Given an Element, this function appends the given ScrollBehavior CSS property value to the elements' 'style' attribute.\n     * If it doesnt already have one, it will add it.\n     * @param {Element} element\n     * @param {ScrollBehavior} behavior\n     */\n    function appendScrollBehaviorToStyleAttribute(element, behavior) {\n        var addition = STYLE_ATTRIBUTE_PROPERTY_NAME + \":\" + behavior;\n        var attributeValue = element.getAttribute(\"style\");\n        if (attributeValue == null || attributeValue === \"\") {\n            element.setAttribute(\"style\", addition);\n            return;\n        }\n        // The style attribute may already include a 'scroll-behavior:<something>' in which case that should be replaced\n        var existingValueForProperty = parseScrollBehaviorFromStyleAttribute(element);\n        if (existingValueForProperty != null) {\n            var replacementProperty = STYLE_ATTRIBUTE_PROPERTY_NAME + \":\" + existingValueForProperty;\n            // Replace the variant that ends with a semi-colon which it may\n            attributeValue = attributeValue.replace(replacementProperty + \";\", \"\");\n            // Replace the variant that *doesn't* end with a semi-colon\n            attributeValue = attributeValue.replace(replacementProperty, \"\");\n        }\n        // Now, append the behavior to the string.\n        element.setAttribute(\"style\", attributeValue.endsWith(\";\") ? \"\" + attributeValue + addition : \";\" + attributeValue + addition);\n    }\n    /**\n     * Given an Element, this function attempts to parse its 'style' attribute (if it has one)' to extract\n     * a value for the 'scroll-behavior' CSS property (if it is given within that style attribute)\n     * @param {Element} element\n     * @returns {ScrollBehavior?}\n     */\n    function parseScrollBehaviorFromStyleAttribute(element) {\n        var styleAttributeValue = element.getAttribute(\"style\");\n        if (styleAttributeValue != null && styleAttributeValue.includes(STYLE_ATTRIBUTE_PROPERTY_NAME)) {\n            var match = styleAttributeValue.match(STYLE_ATTRIBUTE_PROPERTY_REGEXP);\n            if (match != null) {\n                var _a = __read(match, 2), behavior = _a[1];\n                if (behavior != null && behavior !== \"\") {\n                    return behavior;\n                }\n            }\n        }\n        return undefined;\n    }\n\n    var styleDeclarationPropertyName = \"scrollBehavior\";\n    /**\n     * Determines the scroll behavior to use, depending on the given ScrollOptions and the position of the Element\n     * within the DOM\n     * @param {Element|HTMLElement|Window} inputTarget\n     * @param {ScrollOptions} [options]\n     * @returns {ScrollBehavior}\n     */\n    function getScrollBehavior(inputTarget, options) {\n        // If the given 'behavior' is 'smooth', apply smooth scrolling no matter what\n        if (options != null && options.behavior === \"smooth\")\n            return \"smooth\";\n        var target = \"style\" in inputTarget ? inputTarget : getScrollingElement();\n        var value;\n        if (\"style\" in target) {\n            // Check if scroll-behavior is set as a property on the CSSStyleDeclaration\n            var scrollBehaviorPropertyValue = target.style[styleDeclarationPropertyName];\n            // Return it if it is given and has a proper value\n            if (scrollBehaviorPropertyValue != null && scrollBehaviorPropertyValue !== \"\") {\n                value = scrollBehaviorPropertyValue;\n            }\n        }\n        if (value == null) {\n            var attributeValue = target.getAttribute(\"scroll-behavior\");\n            if (attributeValue != null && attributeValue !== \"\") {\n                value = attributeValue;\n            }\n        }\n        if (value == null) {\n            // Otherwise, check if it is set as an inline style\n            value = parseScrollBehaviorFromStyleAttribute(target);\n        }\n        if (value == null) {\n            // Take the computed style for the element and see if it contains a specific 'scroll-behavior' value\n            var computedStyle = getComputedStyle(target);\n            var computedStyleValue = computedStyle.getPropertyValue(\"scrollBehavior\");\n            if (computedStyleValue != null && computedStyleValue !== \"\") {\n                value = computedStyleValue;\n            }\n        }\n        // In all other cases, use the value from the CSSOM\n        return value;\n    }\n\n    \n\n    \n\n    var HALF = 0.5;\n    /**\n     * The easing function to use when applying the smooth scrolling\n     * @param {number} k\n     * @returns {number}\n     */\n    function ease(k) {\n        return HALF * (1 - Math.cos(Math.PI * k));\n    }\n\n    var NOOP = {\n        reset: function () { }\n    };\n    var map = typeof WeakMap === \"undefined\" ? undefined : new WeakMap();\n    function disableScrollSnap(scroller) {\n        // If scroll-behavior is natively supported, or if there is no native WeakMap support, there's no need for this fix\n        if (SUPPORTS_SCROLL_BEHAVIOR || map == null) {\n            return NOOP;\n        }\n        var scrollingElement = getScrollingElement();\n        var cachedScrollSnapValue;\n        var cachedScrollBehaviorStyleAttributeValue;\n        var secondaryScroller;\n        var secondaryScrollerCachedScrollSnapValue;\n        var secondaryScrollerCachedScrollBehaviorStyleAttributeValue;\n        var existingResult = map.get(scroller);\n        if (existingResult != null) {\n            cachedScrollSnapValue = existingResult.cachedScrollSnapValue;\n            cachedScrollBehaviorStyleAttributeValue = existingResult.cachedScrollBehaviorStyleAttributeValue;\n            secondaryScroller = existingResult.secondaryScroller;\n            secondaryScrollerCachedScrollSnapValue = existingResult.secondaryScrollerCachedScrollSnapValue;\n            secondaryScrollerCachedScrollBehaviorStyleAttributeValue = existingResult.secondaryScrollerCachedScrollBehaviorStyleAttributeValue;\n            existingResult.release();\n        }\n        else {\n            cachedScrollSnapValue = scroller.style.scrollSnapType === \"\" ? null : scroller.style.scrollSnapType;\n            cachedScrollBehaviorStyleAttributeValue = parseScrollBehaviorFromStyleAttribute(scroller);\n            secondaryScroller = scroller === scrollingElement && scrollingElement !== document.body ? document.body : undefined;\n            secondaryScrollerCachedScrollSnapValue =\n                secondaryScroller == null ? undefined : secondaryScroller.style.scrollSnapType === \"\" ? null : secondaryScroller.style.scrollSnapType;\n            secondaryScrollerCachedScrollBehaviorStyleAttributeValue =\n                secondaryScroller == null ? undefined : parseScrollBehaviorFromStyleAttribute(secondaryScroller);\n            var cachedComputedScrollSnapValue = getComputedStyle(scroller).getPropertyValue(\"scroll-snap-type\");\n            var secondaryScrollerCachedComputedScrollSnapValue = secondaryScroller == null ? undefined : getComputedStyle(secondaryScroller).getPropertyValue(\"scroll-snap-type\");\n            // If it just so happens that there actually isn't any scroll snapping going on, there's no point in performing any additional work here.\n            if (cachedComputedScrollSnapValue === \"none\" && secondaryScrollerCachedComputedScrollSnapValue === \"none\") {\n                return NOOP;\n            }\n        }\n        scroller.style.scrollSnapType = \"none\";\n        if (secondaryScroller !== undefined) {\n            secondaryScroller.style.scrollSnapType = \"none\";\n        }\n        if (cachedScrollBehaviorStyleAttributeValue !== undefined) {\n            appendScrollBehaviorToStyleAttribute(scroller, cachedScrollBehaviorStyleAttributeValue);\n        }\n        if (secondaryScroller !== undefined && secondaryScrollerCachedScrollBehaviorStyleAttributeValue !== undefined) {\n            appendScrollBehaviorToStyleAttribute(secondaryScroller, secondaryScrollerCachedScrollBehaviorStyleAttributeValue);\n        }\n        var hasReleased = false;\n        var eventTarget = scroller === scrollingElement ? window : scroller;\n        function release() {\n            eventTarget.removeEventListener(\"scroll\", resetHandler);\n            if (map != null) {\n                map[\"delete\"](scroller);\n            }\n            hasReleased = true;\n        }\n        function resetHandler() {\n            scroller.style.scrollSnapType = cachedScrollSnapValue;\n            if (secondaryScroller != null && secondaryScrollerCachedScrollSnapValue !== undefined) {\n                secondaryScroller.style.scrollSnapType = secondaryScrollerCachedScrollSnapValue;\n            }\n            if (cachedScrollBehaviorStyleAttributeValue !== undefined) {\n                appendScrollBehaviorToStyleAttribute(scroller, cachedScrollBehaviorStyleAttributeValue);\n            }\n            if (secondaryScroller !== undefined && secondaryScrollerCachedScrollBehaviorStyleAttributeValue !== undefined) {\n                appendScrollBehaviorToStyleAttribute(secondaryScroller, secondaryScrollerCachedScrollBehaviorStyleAttributeValue);\n            }\n            release();\n        }\n        function reset() {\n            setTimeout(function () {\n                if (hasReleased)\n                    return;\n                eventTarget.addEventListener(\"scroll\", resetHandler);\n            });\n        }\n        map.set(scroller, {\n            release: release,\n            cachedScrollSnapValue: cachedScrollSnapValue,\n            cachedScrollBehaviorStyleAttributeValue: cachedScrollBehaviorStyleAttributeValue,\n            secondaryScroller: secondaryScroller,\n            secondaryScrollerCachedScrollSnapValue: secondaryScrollerCachedScrollSnapValue,\n            secondaryScrollerCachedScrollBehaviorStyleAttributeValue: secondaryScrollerCachedScrollBehaviorStyleAttributeValue\n        });\n        return {\n            reset: reset\n        };\n    }\n\n    /**\n     * The duration of a smooth scroll\n     * @type {number}\n     */\n    var SCROLL_TIME = 15000;\n    /**\n     * Performs a smooth repositioning of the scroll\n     * @param {ISmoothScrollOptions} options\n     */\n    function smoothScroll(options) {\n        var startTime = options.startTime, startX = options.startX, startY = options.startY, endX = options.endX, endY = options.endY, method = options.method, scroller = options.scroller;\n        var timeLapsed = 0;\n        var distanceX = endX - startX;\n        var distanceY = endY - startY;\n        var speed = Math.max(Math.abs((distanceX / 1000) * SCROLL_TIME), Math.abs((distanceY / 1000) * SCROLL_TIME));\n        // Temporarily disables any scroll snapping that may be active since it fights for control over the scroller with this polyfill\n        var scrollSnapFix = disableScrollSnap(scroller);\n        requestAnimationFrame(function animate(timestamp) {\n            timeLapsed += timestamp - startTime;\n            var percentage = Math.max(0, Math.min(1, speed === 0 ? 0 : timeLapsed / speed));\n            var positionX = Math.floor(startX + distanceX * ease(percentage));\n            var positionY = Math.floor(startY + distanceY * ease(percentage));\n            method(positionX, positionY);\n            if (positionX !== endX || positionY !== endY) {\n                requestAnimationFrame(animate);\n            }\n            else {\n                if (scrollSnapFix != null) {\n                    scrollSnapFix.reset();\n                    scrollSnapFix = undefined;\n                }\n            }\n        });\n    }\n\n    /**\n     * Returns a High Resolution timestamp if possible, otherwise fallbacks to Date.now()\n     * @returns {number}\n     */\n    function now() {\n        if (\"performance\" in window)\n            return performance.now();\n        return Date.now();\n    }\n\n    \n\n    var ELEMENT_ORIGINAL_SCROLL = UNSUPPORTED_ENVIRONMENT ? undefined : Element.prototype.scroll;\n\n    var WINDOW_ORIGINAL_SCROLL = UNSUPPORTED_ENVIRONMENT ? undefined : window.scroll;\n\n    var ELEMENT_ORIGINAL_SCROLL_BY = UNSUPPORTED_ENVIRONMENT ? undefined : Element.prototype.scrollBy;\n\n    var WINDOW_ORIGINAL_SCROLL_BY = UNSUPPORTED_ENVIRONMENT ? undefined : window.scrollBy;\n\n    var ELEMENT_ORIGINAL_SCROLL_TO = UNSUPPORTED_ENVIRONMENT ? undefined : Element.prototype.scrollTo;\n\n    var WINDOW_ORIGINAL_SCROLL_TO = UNSUPPORTED_ENVIRONMENT ? undefined : window.scrollTo;\n\n    /**\n     * A fallback if Element.prototype.scroll is not defined\n     * @param {number} x\n     * @param {number} y\n     */\n    function elementPrototypeScrollFallback(x, y) {\n        this.__adjustingScrollPosition = true;\n        this.scrollLeft = x;\n        this.scrollTop = y;\n        delete this.__adjustingScrollPosition;\n    }\n    /**\n     * A fallback if Element.prototype.scrollTo is not defined\n     * @param {number} x\n     * @param {number} y\n     */\n    function elementPrototypeScrollToFallback(x, y) {\n        return elementPrototypeScrollFallback.call(this, x, y);\n    }\n    /**\n     * A fallback if Element.prototype.scrollBy is not defined\n     * @param {number} x\n     * @param {number} y\n     */\n    function elementPrototypeScrollByFallback(x, y) {\n        this.__adjustingScrollPosition = true;\n        this.scrollLeft += x;\n        this.scrollTop += y;\n        delete this.__adjustingScrollPosition;\n    }\n    /**\n     * Gets the original non-patched prototype method for the given kind\n     * @param {ScrollMethodName} kind\n     * @param {Element|Window} element\n     * @return {Function}\n     */\n    function getOriginalScrollMethodForKind(kind, element) {\n        switch (kind) {\n            case \"scroll\":\n                if (element instanceof Element) {\n                    if (ELEMENT_ORIGINAL_SCROLL != null) {\n                        return ELEMENT_ORIGINAL_SCROLL;\n                    }\n                    else {\n                        return elementPrototypeScrollFallback;\n                    }\n                }\n                else {\n                    return WINDOW_ORIGINAL_SCROLL;\n                }\n            case \"scrollBy\":\n                if (element instanceof Element) {\n                    if (ELEMENT_ORIGINAL_SCROLL_BY != null) {\n                        return ELEMENT_ORIGINAL_SCROLL_BY;\n                    }\n                    else {\n                        return elementPrototypeScrollByFallback;\n                    }\n                }\n                else {\n                    return WINDOW_ORIGINAL_SCROLL_BY;\n                }\n            case \"scrollTo\":\n                if (element instanceof Element) {\n                    if (ELEMENT_ORIGINAL_SCROLL_TO != null) {\n                        return ELEMENT_ORIGINAL_SCROLL_TO;\n                    }\n                    else {\n                        return elementPrototypeScrollToFallback;\n                    }\n                }\n                else {\n                    return WINDOW_ORIGINAL_SCROLL_TO;\n                }\n        }\n    }\n\n    /**\n     * Gets the Smooth Scroll Options to use for the step function\n     * @param {Element|Window} element\n     * @param {number} x\n     * @param {number} y\n     * @param {ScrollMethodName} kind\n     * @returns {ISmoothScrollOptions}\n     */\n    function getSmoothScrollOptions(element, x, y, kind) {\n        var startTime = now();\n        if (!(element instanceof Element)) {\n            // Use window as the scroll container\n            var scrollX_1 = window.scrollX, pageXOffset_1 = window.pageXOffset, scrollY_1 = window.scrollY, pageYOffset_1 = window.pageYOffset;\n            var startX = scrollX_1 == null || scrollX_1 === 0 ? pageXOffset_1 : scrollX_1;\n            var startY = scrollY_1 == null || scrollY_1 === 0 ? pageYOffset_1 : scrollY_1;\n            return {\n                startTime: startTime,\n                startX: startX,\n                startY: startY,\n                endX: Math.floor(kind === \"scrollBy\" ? startX + x : x),\n                endY: Math.floor(kind === \"scrollBy\" ? startY + y : y),\n                method: getOriginalScrollMethodForKind(\"scrollTo\", window).bind(window),\n                scroller: getScrollingElement()\n            };\n        }\n        else {\n            var scrollLeft = element.scrollLeft, scrollTop = element.scrollTop;\n            var startX = scrollLeft;\n            var startY = scrollTop;\n            return {\n                startTime: startTime,\n                startX: startX,\n                startY: startY,\n                endX: Math.floor(kind === \"scrollBy\" ? startX + x : x),\n                endY: Math.floor(kind === \"scrollBy\" ? startY + y : y),\n                method: getOriginalScrollMethodForKind(\"scrollTo\", element).bind(element),\n                scroller: element\n            };\n        }\n    }\n\n    /**\n     * Ensures that the given value is numeric\n     * @param {number} value\n     * @return {number}\n     */\n    function ensureNumeric(value) {\n        if (value == null)\n            return 0;\n        else if (typeof value === \"number\") {\n            return value;\n        }\n        else if (typeof value === \"string\") {\n            return parseFloat(value);\n        }\n        else {\n            return 0;\n        }\n    }\n\n    /**\n     * Returns true if the given value is some ScrollToOptions\n     * @param {number | ScrollToOptions} value\n     * @return {value is ScrollToOptions}\n     */\n    function isScrollToOptions(value) {\n        return value != null && typeof value === \"object\";\n    }\n\n    /**\n     * Handles a scroll method\n     * @param {Element|Window} element\n     * @param {ScrollMethodName} kind\n     * @param {number | ScrollToOptions} optionsOrX\n     * @param {number} y\n     */\n    function handleScrollMethod(element, kind, optionsOrX, y) {\n        onScrollWithOptions(getScrollToOptionsWithValidation(optionsOrX, y), element, kind);\n    }\n    /**\n     * Invoked when a 'ScrollToOptions' dict is provided to 'scroll()' as the first argument\n     * @param {ScrollToOptions} options\n     * @param {Element|Window} element\n     * @param {ScrollMethodName} kind\n     */\n    function onScrollWithOptions(options, element, kind) {\n        var behavior = getScrollBehavior(element, options);\n        // If the behavior is 'auto' apply instantaneous scrolling\n        if (behavior == null || behavior === \"auto\") {\n            getOriginalScrollMethodForKind(kind, element).call(element, options.left, options.top);\n        }\n        else {\n            smoothScroll(getSmoothScrollOptions(element, options.left, options.top, kind));\n        }\n    }\n    /**\n     * Normalizes the given scroll coordinates\n     * @param {number?} x\n     * @param {number?} y\n     * @return {Required<Pick<ScrollToOptions, \"top\" | \"left\">>}\n     */\n    function normalizeScrollCoordinates(x, y) {\n        return {\n            left: ensureNumeric(x),\n            top: ensureNumeric(y)\n        };\n    }\n    /**\n     * Gets ScrollToOptions based on the given arguments. Will throw if validation fails\n     * @param {number | ScrollToOptions} optionsOrX\n     * @param {number} y\n     * @return {Required<ScrollToOptions>}\n     */\n    function getScrollToOptionsWithValidation(optionsOrX, y) {\n        // If only one argument is given, and it isn't an options object, throw a TypeError\n        if (y === undefined && !isScrollToOptions(optionsOrX)) {\n            throw new TypeError(\"Failed to execute 'scroll' on 'Element': parameter 1 ('options') is not an object.\");\n        }\n        // Scroll based on the primitive values given as arguments\n        if (!isScrollToOptions(optionsOrX)) {\n            return __assign(__assign({}, normalizeScrollCoordinates(optionsOrX, y)), { behavior: \"auto\" });\n        }\n        // Scroll based on the received options object\n        else {\n            return __assign(__assign({}, normalizeScrollCoordinates(optionsOrX.left, optionsOrX.top)), { behavior: optionsOrX.behavior == null ? \"auto\" : optionsOrX.behavior });\n        }\n    }\n\n    /**\n     * Patches the 'scroll' method on the Element prototype\n     */\n    function patchElementScroll() {\n        Element.prototype.scroll = function (optionsOrX, y) {\n            handleScrollMethod(this, \"scroll\", optionsOrX, y);\n        };\n    }\n\n    /**\n     * Patches the 'scrollBy' method on the Element prototype\n     */\n    function patchElementScrollBy() {\n        Element.prototype.scrollBy = function (optionsOrX, y) {\n            handleScrollMethod(this, \"scrollBy\", optionsOrX, y);\n        };\n    }\n\n    /**\n     * Patches the 'scrollTo' method on the Element prototype\n     */\n    function patchElementScrollTo() {\n        Element.prototype.scrollTo = function (optionsOrX, y) {\n            handleScrollMethod(this, \"scrollTo\", optionsOrX, y);\n        };\n    }\n\n    /**\n     * Patches the 'scroll' method on the Window prototype\n     */\n    function patchWindowScroll() {\n        window.scroll = function (optionsOrX, y) {\n            handleScrollMethod(this, \"scroll\", optionsOrX, y);\n        };\n    }\n\n    /**\n     * Patches the 'scrollBy' method on the Window prototype\n     */\n    function patchWindowScrollBy() {\n        window.scrollBy = function (optionsOrX, y) {\n            handleScrollMethod(this, \"scrollBy\", optionsOrX, y);\n        };\n    }\n\n    /**\n     * Patches the 'scrollTo' method on the Window prototype\n     */\n    function patchWindowScrollTo() {\n        window.scrollTo = function (optionsOrX, y) {\n            handleScrollMethod(this, \"scrollTo\", optionsOrX, y);\n        };\n    }\n\n    // tslint:disable:no-any\n    /**\n     * Gets the parent of an element, taking into account DocumentFragments, ShadowRoots, as well as the root context (window)\n     * @param {EventTarget} currentElement\n     * @returns {EventTarget | null}\n     */\n    function getParent(currentElement) {\n        if (\"nodeType\" in currentElement && currentElement.nodeType === 1) {\n            return currentElement.parentNode;\n        }\n        if (\"ShadowRoot\" in window && currentElement instanceof window.ShadowRoot) {\n            return currentElement.host;\n        }\n        else if (currentElement === document) {\n            return window;\n        }\n        else if (currentElement instanceof Node)\n            return currentElement.parentNode;\n        return null;\n    }\n\n    /**\n     * Returns true if the given overflow property represents a scrollable overflow value\n     * @param {string | null} overflow\n     * @return {boolean}\n     */\n    function canOverflow(overflow) {\n        return overflow !== \"visible\" && overflow !== \"clip\";\n    }\n    /**\n     * Returns true if the given element is scrollable\n     * @param {Element} element\n     * @return {boolean}\n     */\n    function isScrollable(element) {\n        if (element.clientHeight < element.scrollHeight || element.clientWidth < element.scrollWidth) {\n            var style = getComputedStyle(element, null);\n            return canOverflow(style.overflowY) || canOverflow(style.overflowX);\n        }\n        return false;\n    }\n    /**\n     * Finds the nearest ancestor of an element that can scroll\n     * @param {Element} target\n     * @returns {Element|Window?}\n     */\n    function findNearestAncestorsWithScrollBehavior(target) {\n        var currentElement = target;\n        var scrollingElement = getScrollingElement();\n        while (currentElement != null) {\n            var behavior = getScrollBehavior(currentElement);\n            if (behavior != null && (currentElement === scrollingElement || isScrollable(currentElement))) {\n                return [currentElement, behavior];\n            }\n            var parent_1 = getParent(currentElement);\n            currentElement = parent_1;\n        }\n        // No such element could be found. Start over, but this time find the nearest ancestor that can simply scroll\n        currentElement = target;\n        while (currentElement != null) {\n            if (currentElement === scrollingElement || isScrollable(currentElement)) {\n                return [currentElement, \"auto\"];\n            }\n            var parent_2 = getParent(currentElement);\n            currentElement = parent_2;\n        }\n        // Default to the scrolling element\n        return [scrollingElement, \"auto\"];\n    }\n\n    // tslint:disable:no-any\n    /**\n     * Finds the nearest root from an element\n     * @param {Element} target\n     * @returns {Document|ShadowRoot}\n     */\n    function findNearestRoot(target) {\n        var currentElement = target;\n        while (currentElement != null) {\n            if (\"ShadowRoot\" in window && currentElement instanceof window.ShadowRoot) {\n                // Assume this is a ShadowRoot\n                return currentElement;\n            }\n            var parent_1 = getParent(currentElement);\n            if (parent_1 === currentElement) {\n                return document;\n            }\n            currentElement = parent_1;\n        }\n        return document;\n    }\n\n    /**\n     * Gets the origin of the given Location or HTMLAnchorElement if available in the runtime, and otherwise shims it. (it's a one-liner)\n     * @returns {string}\n     */\n    function getLocationOrigin(locationLike) {\n        if (locationLike === void 0) { locationLike = location; }\n        if (\"origin\" in locationLike && locationLike.origin != null) {\n            return locationLike.origin;\n        }\n        var port = locationLike.port != null && locationLike.port.length > 0 ? \":\" + locationLike.port : \"\";\n        if (locationLike.protocol === \"http:\" && port === \":80\") {\n            port = \"\";\n        }\n        else if (locationLike.protocol === \"https:\" && port === \":443\") {\n            port = \"\";\n        }\n        return locationLike.protocol + \"//\" + locationLike.hostname + port;\n    }\n\n    /**\n     * A Regular expression that matches id's of the form \"#[digit]\"\n     * @type {RegExp}\n     */\n    var ID_WITH_LEADING_DIGIT_REGEXP = /^#\\d/;\n    /**\n     * Catches anchor navigation to IDs within the same root and ensures that they can be smooth-scrolled\n     * if the scroll behavior is smooth in the first rooter within that context\n     */\n    function catchNavigation() {\n        // Listen for 'click' events globally\n        window.addEventListener(\"click\", function (e) {\n            // Only work with trusted events on HTMLAnchorElements\n            if (!e.isTrusted || !(e.target instanceof HTMLAnchorElement))\n                return;\n            var _a = e.target, pathname = _a.pathname, search = _a.search, hash = _a.hash;\n            var pointsToCurrentPage = getLocationOrigin(e.target) === getLocationOrigin(location) && pathname === location.pathname && search === location.search;\n            // Only work with HTMLAnchorElements that navigates to a specific ID on the current page\n            if (!pointsToCurrentPage || hash == null || hash.length < 1) {\n                return;\n            }\n            // Find the nearest root, whether it be a ShadowRoot or the document itself\n            var root = findNearestRoot(e.target);\n            // Attempt to match the selector from that root. querySelector' doesn't support IDs that start with a digit, so work around that limitation\n            var elementMatch = hash.match(ID_WITH_LEADING_DIGIT_REGEXP) != null ? root.getElementById(hash.slice(1)) : root.querySelector(hash);\n            // If no selector could be found, don't proceed\n            if (elementMatch == null)\n                return;\n            // Find the nearest ancestor that can be scrolled\n            var _b = __read(findNearestAncestorsWithScrollBehavior(elementMatch), 2), behavior = _b[1];\n            // If the behavior isn't smooth, don't proceed\n            if (behavior !== \"smooth\")\n                return;\n            // Otherwise, first prevent the default action.\n            e.preventDefault();\n            // Now, scroll to the element with that ID\n            elementMatch.scrollIntoView({\n                behavior: behavior\n            });\n        });\n    }\n\n    var ELEMENT_ORIGINAL_SCROLL_INTO_VIEW = UNSUPPORTED_ENVIRONMENT ? undefined : Element.prototype.scrollIntoView;\n\n    /**\n     * The majority of this file is based on https://github.com/stipsan/compute-scroll-into-view (MIT license),\n     * but has been rewritten to accept a scroller as an argument.\n     */\n    /**\n     * Find out which edge to align against when logical scroll position is \"nearest\"\n     * Interesting fact: \"nearest\" works similarly to \"if-needed\", if the element is fully visible it will not scroll it\n     *\n     * Legends:\n     *      \n     *  target    frame\n     *      \n     */\n    function alignNearest(scrollingEdgeStart, scrollingEdgeEnd, scrollingSize, scrollingBorderStart, scrollingBorderEnd, elementEdgeStart, elementEdgeEnd, elementSize) {\n        /**\n         * If element edge A and element edge B are both outside scrolling box edge A and scrolling box edge B\n         *\n         *          \n         *        \n         *            \n         *                    do nothing\n         *            \n         *        \n         *          \n         *\n         *  If element edge C and element edge D are both outside scrolling box edge C and scrolling box edge D\n         *\n         *         \n         *   \n         *                    do nothing\n         *   \n         *         \n         */\n        if ((elementEdgeStart < scrollingEdgeStart && elementEdgeEnd > scrollingEdgeEnd) ||\n            (elementEdgeStart > scrollingEdgeStart && elementEdgeEnd < scrollingEdgeEnd)) {\n            return 0;\n        }\n        /**\n         * If element edge A is outside scrolling box edge A and element height is less than scrolling box height\n         *\n         *          \n         *                 \n         *                         \n         *  from             to    \n         *\n         *                     \n         *\n         * If element edge B is outside scrolling box edge B and element height is greater than scrolling box height\n         *\n         *                   \n         *                             \n         *  from         to      \n         *                           \n         *                 \n         *                         \n         *            \n         *          \n         *\n         * If element edge C is outside scrolling box edge C and element width is less than scrolling box width\n         *\n         *       from                 to\n         *                       \n         *                   \n         *                            \n         *                   \n         *                       \n         *\n         * If element edge D is outside scrolling box edge D and element width is greater than scrolling box width\n         *\n         *       from                 to\n         *                       \n         *           \n         *                              \n         *           \n         *                       \n         */\n        if ((elementEdgeStart <= scrollingEdgeStart && elementSize <= scrollingSize) ||\n            (elementEdgeEnd >= scrollingEdgeEnd && elementSize >= scrollingSize)) {\n            return elementEdgeStart - scrollingEdgeStart - scrollingBorderStart;\n        }\n        /**\n         * If element edge B is outside scrolling box edge B and element height is less than scrolling box height\n         *\n         *                     \n         *\n         *  from             to    \n         *                         \n         *                 \n         *          \n         *\n         * If element edge A is outside scrolling box edge A and element height is greater than scrolling box height\n         *\n         *          \n         *            \n         *                         \n         *                 \n         *                           \n         *  from         to      \n         *                             \n         *                   \n         *\n         * If element edge C is outside scrolling box edge C and element width is greater than scrolling box width\n         *\n         *           from                 to\n         *                           \n         *             \n         *                                \n         *             \n         *                           \n         *\n         * If element edge D is outside scrolling box edge D and element width is less than scrolling box width\n         *\n         *           from                 to\n         *                           \n         *                             \n         *                                \n         *                             \n         *                           \n         *\n         */\n        if ((elementEdgeEnd > scrollingEdgeEnd && elementSize < scrollingSize) || (elementEdgeStart < scrollingEdgeStart && elementSize > scrollingSize)) {\n            return elementEdgeEnd - scrollingEdgeEnd + scrollingBorderEnd;\n        }\n        return 0;\n    }\n    function computeScrollIntoView(target, scroller, options) {\n        var block = options.block, inline = options.inline;\n        // Used to handle the top most element that can be scrolled\n        var scrollingElement = getScrollingElement();\n        // Support pinch-zooming properly, making sure elements scroll into the visual viewport\n        // Browsers that don't support visualViewport will report the layout viewport dimensions on document.documentElement.clientWidth/Height\n        // and viewport dimensions on window.innerWidth/Height\n        // https://www.quirksmode.org/mobile/viewports2.html\n        // https://bokand.github.io/viewport/index.html\n        var viewportWidth = window.visualViewport != null ? visualViewport.width : innerWidth;\n        var viewportHeight = window.visualViewport != null ? visualViewport.height : innerHeight;\n        var viewportX = window.scrollX != null ? window.scrollX : window.pageXOffset;\n        var viewportY = window.scrollY != null ? window.scrollY : window.pageYOffset;\n        var _a = target.getBoundingClientRect(), targetHeight = _a.height, targetWidth = _a.width, targetTop = _a.top, targetRight = _a.right, targetBottom = _a.bottom, targetLeft = _a.left;\n        // These values mutate as we loop through and generate scroll coordinates\n        var targetBlock = block === \"start\" || block === \"nearest\" ? targetTop : block === \"end\" ? targetBottom : targetTop + targetHeight / 2; // block === 'center\n        var targetInline = inline === \"center\" ? targetLeft + targetWidth / 2 : inline === \"end\" ? targetRight : targetLeft; // inline === 'start || inline === 'nearest\n        var _b = scroller.getBoundingClientRect(), height = _b.height, width = _b.width, top = _b.top, right = _b.right, bottom = _b.bottom, left = _b.left;\n        var frameStyle = getComputedStyle(scroller);\n        var borderLeft = parseInt(frameStyle.borderLeftWidth, 10);\n        var borderTop = parseInt(frameStyle.borderTopWidth, 10);\n        var borderRight = parseInt(frameStyle.borderRightWidth, 10);\n        var borderBottom = parseInt(frameStyle.borderBottomWidth, 10);\n        var blockScroll = 0;\n        var inlineScroll = 0;\n        // The property existance checks for offset[Width|Height] is because only HTMLElement objects have them, but any Element might pass by here\n        // @TODO find out if the \"as HTMLElement\" overrides can be dropped\n        var scrollbarWidth = \"offsetWidth\" in scroller ? scroller.offsetWidth - scroller.clientWidth - borderLeft - borderRight : 0;\n        var scrollbarHeight = \"offsetHeight\" in scroller ? scroller.offsetHeight - scroller.clientHeight - borderTop - borderBottom : 0;\n        if (scrollingElement === scroller) {\n            // Handle viewport logic (document.documentElement or document.body)\n            if (block === \"start\") {\n                blockScroll = targetBlock;\n            }\n            else if (block === \"end\") {\n                blockScroll = targetBlock - viewportHeight;\n            }\n            else if (block === \"nearest\") {\n                blockScroll = alignNearest(viewportY, viewportY + viewportHeight, viewportHeight, borderTop, borderBottom, viewportY + targetBlock, viewportY + targetBlock + targetHeight, targetHeight);\n            }\n            else {\n                // block === 'center' is the default\n                blockScroll = targetBlock - viewportHeight / 2;\n            }\n            if (inline === \"start\") {\n                inlineScroll = targetInline;\n            }\n            else if (inline === \"center\") {\n                inlineScroll = targetInline - viewportWidth / 2;\n            }\n            else if (inline === \"end\") {\n                inlineScroll = targetInline - viewportWidth;\n            }\n            else {\n                // inline === 'nearest' is the default\n                inlineScroll = alignNearest(viewportX, viewportX + viewportWidth, viewportWidth, borderLeft, borderRight, viewportX + targetInline, viewportX + targetInline + targetWidth, targetWidth);\n            }\n            // Apply scroll position offsets and ensure they are within bounds\n            // @TODO add more test cases to cover this 100%\n            blockScroll = Math.max(0, blockScroll + viewportY);\n            inlineScroll = Math.max(0, inlineScroll + viewportX);\n        }\n        else {\n            // Handle each scrolling frame that might exist between the target and the viewport\n            if (block === \"start\") {\n                blockScroll = targetBlock - top - borderTop;\n            }\n            else if (block === \"end\") {\n                blockScroll = targetBlock - bottom + borderBottom + scrollbarHeight;\n            }\n            else if (block === \"nearest\") {\n                blockScroll = alignNearest(top, bottom, height, borderTop, borderBottom + scrollbarHeight, targetBlock, targetBlock + targetHeight, targetHeight);\n            }\n            else {\n                // block === 'center' is the default\n                blockScroll = targetBlock - (top + height / 2) + scrollbarHeight / 2;\n            }\n            if (inline === \"start\") {\n                inlineScroll = targetInline - left - borderLeft;\n            }\n            else if (inline === \"center\") {\n                inlineScroll = targetInline - (left + width / 2) + scrollbarWidth / 2;\n            }\n            else if (inline === \"end\") {\n                inlineScroll = targetInline - right + borderRight + scrollbarWidth;\n            }\n            else {\n                // inline === 'nearest' is the default\n                inlineScroll = alignNearest(left, right, width, borderLeft, borderRight + scrollbarWidth, targetInline, targetInline + targetWidth, targetWidth);\n            }\n            var scrollLeft = scroller.scrollLeft, scrollTop = scroller.scrollTop;\n            // Ensure scroll coordinates are not out of bounds while applying scroll offsets\n            blockScroll = Math.max(0, Math.min(scrollTop + blockScroll, scroller.scrollHeight - height + scrollbarHeight));\n            inlineScroll = Math.max(0, Math.min(scrollLeft + inlineScroll, scroller.scrollWidth - width + scrollbarWidth));\n        }\n        return {\n            top: blockScroll,\n            left: inlineScroll\n        };\n    }\n\n    /**\n     * Patches the 'scrollIntoView' method on the Element prototype\n     */\n    function patchElementScrollIntoView() {\n        Element.prototype.scrollIntoView = function (arg) {\n            var normalizedOptions = arg == null || arg === true\n                ? {\n                    block: \"start\",\n                    inline: \"nearest\"\n                }\n                : arg === false\n                    ? {\n                        block: \"end\",\n                        inline: \"nearest\"\n                    }\n                    : arg;\n            // Find the nearest ancestor that can be scrolled\n            var _a = __read(findNearestAncestorsWithScrollBehavior(this), 2), ancestorWithScroll = _a[0], ancestorWithScrollBehavior = _a[1];\n            var behavior = normalizedOptions.behavior != null ? normalizedOptions.behavior : ancestorWithScrollBehavior;\n            // If the behavior isn't smooth, simply invoke the original implementation and do no more\n            if (behavior !== \"smooth\") {\n                // Assert that 'scrollIntoView' is actually defined\n                if (ELEMENT_ORIGINAL_SCROLL_INTO_VIEW != null) {\n                    ELEMENT_ORIGINAL_SCROLL_INTO_VIEW.call(this, normalizedOptions);\n                }\n                // Otherwise, invoke 'scrollTo' instead and provide the scroll coordinates\n                else {\n                    var _b = computeScrollIntoView(this, ancestorWithScroll, normalizedOptions), top_1 = _b.top, left = _b.left;\n                    getOriginalScrollMethodForKind(\"scrollTo\", this).call(this, left, top_1);\n                }\n                return;\n            }\n            ancestorWithScroll.scrollTo(__assign({ behavior: behavior }, computeScrollIntoView(this, ancestorWithScroll, normalizedOptions)));\n        };\n        // On IE11, HTMLElement has its own declaration of scrollIntoView and does not inherit this from the prototype chain, so we'll need to patch that one too.\n        if (HTMLElement.prototype.scrollIntoView != null && HTMLElement.prototype.scrollIntoView !== Element.prototype.scrollIntoView) {\n            HTMLElement.prototype.scrollIntoView = Element.prototype.scrollIntoView;\n        }\n    }\n\n    var ELEMENT_ORIGINAL_SCROLL_TOP_SET_DESCRIPTOR = UNSUPPORTED_ENVIRONMENT\n        ? undefined\n        : Object.getOwnPropertyDescriptor(Element.prototype, \"scrollTop\").set;\n\n    /**\n     * Patches the 'scrollTop' property descriptor on the Element prototype\n     */\n    function patchElementScrollTop() {\n        Object.defineProperty(Element.prototype, \"scrollTop\", {\n            set: function (scrollTop) {\n                if (this.__adjustingScrollPosition) {\n                    return ELEMENT_ORIGINAL_SCROLL_TOP_SET_DESCRIPTOR.call(this, scrollTop);\n                }\n                handleScrollMethod(this, \"scrollTo\", this.scrollLeft, scrollTop);\n                return scrollTop;\n            }\n        });\n    }\n\n    var ELEMENT_ORIGINAL_SCROLL_LEFT_SET_DESCRIPTOR = UNSUPPORTED_ENVIRONMENT\n        ? undefined\n        : Object.getOwnPropertyDescriptor(Element.prototype, \"scrollLeft\").set;\n\n    /**\n     * Patches the 'scrollLeft' property descriptor on the Element prototype\n     */\n    function patchElementScrollLeft() {\n        Object.defineProperty(Element.prototype, \"scrollLeft\", {\n            set: function (scrollLeft) {\n                if (this.__adjustingScrollPosition) {\n                    return ELEMENT_ORIGINAL_SCROLL_LEFT_SET_DESCRIPTOR.call(this, scrollLeft);\n                }\n                handleScrollMethod(this, \"scrollTo\", scrollLeft, this.scrollTop);\n                return scrollLeft;\n            }\n        });\n    }\n\n    /**\n     * Applies the polyfill\n     */\n    function patch() {\n        // Element.prototype methods\n        patchElementScroll();\n        patchElementScrollBy();\n        patchElementScrollTo();\n        patchElementScrollIntoView();\n        // Element.prototype descriptors\n        patchElementScrollLeft();\n        patchElementScrollTop();\n        // window methods\n        patchWindowScroll();\n        patchWindowScrollBy();\n        patchWindowScrollTo();\n        // Navigation\n        catchNavigation();\n    }\n\n    /**\n     * Is true if the browser natively supports the Element.prototype.[scroll|scrollTo|scrollBy|scrollIntoView] methods\n     * @type {boolean}\n     */\n    var SUPPORTS_ELEMENT_PROTOTYPE_SCROLL_METHODS = UNSUPPORTED_ENVIRONMENT\n        ? false\n        : \"scroll\" in Element.prototype && \"scrollTo\" in Element.prototype && \"scrollBy\" in Element.prototype && \"scrollIntoView\" in Element.prototype;\n\n    if (!UNSUPPORTED_ENVIRONMENT && (!SUPPORTS_SCROLL_BEHAVIOR || !SUPPORTS_ELEMENT_PROTOTYPE_SCROLL_METHODS)) {\n        patch();\n    }\n\n}());\n//# sourceMappingURL=index.js.map\n","import { Core, core } from './Core';\nimport { Configuration, defaultConfiguration } from './types/Configuration';\nimport { Direction, directiontoString, getReverseDirection } from './types/Direction';\nimport { Section } from './types/Section';\n\nclass Compass {\n  private static instance: Compass;\n  private _ready: boolean = false;\n  private _idPool: number = 0;\n  private _sections: { [key: string]: Section; } = {};\n  private _sectionCount: number = 0;\n  private _defaultSectionId: string = '';\n  private _lastSectionId: string = '';\n  private _duringFocusChange: boolean = false;\n  private globalConfiguration: Configuration = defaultConfiguration;\n  private _pause: boolean = false;\n  private core: Core = core;\n  private readonly ID_POOL_PREFIX = 'section-';\n  private readonly EVENT_PREFIX = 'sn:';\n  private _throttle: number | null = null;\n\n\n\n  public static getInstance (): Compass {\n    if (!Compass.instance) {\n      Compass.instance = new Compass();\n    }\n    return Compass.instance;\n  }\n\n  // #region PUBLIC FUNCTIONS\n\n  /**\n   * Init global listeners to listen for key, focus and blur events.\n   */\n  public init (): void {\n    if (!this._ready) {\n      window.addEventListener('keydown', this.onKeyDown.bind(this));\n      window.addEventListener('keyup', this.onKeyUp.bind(this));\n      window.addEventListener('focus', this.onFocus.bind(this), true);\n      window.addEventListener('blur', this.onBlur.bind(this), true);\n      // document.body.addEventListener('click', onBodyClick);\n      this._ready = true;\n    }\n  }\n\n  /**\n   * Remove global listeners, reset Compass context.\n   */\n  public uninit(): void {\n    window.removeEventListener('blur', this.onBlur, true);\n    window.removeEventListener('focus', this.onFocus, true);\n    window.removeEventListener('keyup', this.onKeyUp);\n    window.removeEventListener('keydown', this.onKeyDown);\n    this.clear();\n    this._idPool = 0;\n    this._ready = false;\n  }\n\n  /**\n   * Clear Compass context.\n   */\n  public clear (): void {\n    this._sections = {};\n    this._sectionCount = 0;\n    this._defaultSectionId = '';\n    this._lastSectionId = '';\n    this._duringFocusChange = false;\n  }\n\n  /**\n   * Reset the last focused element and previous element of a section.\n   * @param sectionId - section to reset\n   */\n  public reset (sectionId: string): void {\n    if (sectionId) {\n      this._sections[sectionId].lastFocusedElement = undefined;\n      this._sections[sectionId].previous = undefined;\n    } else {\n      for (const id in this._sections) {\n        const section = this._sections[id];\n        section.lastFocusedElement = undefined;\n        section.previous = undefined;\n      }\n    }\n  }\n\n  /**\n   * Set the configuration of a section.\n   * @param sectionId - section to configure.\n   * @param config - configuration\n   */\n  public set (sectionId: string | undefined, config: Configuration): boolean | never {\n    const finalConfig = {};\n    Object.assign(finalConfig, this.globalConfiguration);\n    Object.assign(finalConfig, config);\n\n    if (sectionId !== undefined) {\n      if (!this._sections[sectionId]) {\n        throw new Error(`Section \"${sectionId}\" doesn't exist!`);\n      }\n      this._sections[sectionId].configuration = finalConfig as Configuration;\n    } else {\n      this.globalConfiguration = finalConfig as Configuration;\n    }\n    return true;\n  }\n\n  /**\n   * Add a section\n   * @param sectionId - section id to add\n   * @param config - configuration of the section\n   * @returns sectionId\n   */\n  public add (sectionId: string | undefined, config: Configuration): string | never {\n    if (!sectionId) {\n      // eslint-disable-next-line no-param-reassign\n      sectionId = this.generateId();\n    }\n    if (this._sections[sectionId]) {\n      throw new Error(`Section \"${sectionId}\" already exist!`);\n    } else {\n      this._sections[sectionId] = {\n        id: sectionId,\n        configuration: defaultConfiguration,\n        lastFocusedElement: undefined,\n        previous: undefined\n      };\n    }\n    if (this.set(sectionId, config)) {\n      this._sectionCount++;\n    }\n    return sectionId;\n  }\n\n  /**\n   * Remove a section\n   * @param sectionId id of the section to remove\n   * @returns true if section has been removed, false otherwise\n   */\n  public remove (sectionId: string): boolean {\n    if (this._sections[sectionId]) {\n      if (delete this._sections[sectionId]) {\n        this._sectionCount--;\n      }\n      if (this._lastSectionId === sectionId) {\n        this._lastSectionId = '';\n      }\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Disable navigation on a section\n   * @param sectionId - id of the section to disable\n   * @returns true if section has been disabled, false otherwise\n   */\n  public disable (sectionId: string): boolean {\n    if (this._sections[sectionId] && this._sections[sectionId].configuration) {\n      this._sections[sectionId].configuration.disabled = true;\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Enable navigation on a section\n   * @param sectionId - id of the section to enable\n   * @returns true if section has been enabled, false otherwise\n   */\n  public enable (sectionId: string): boolean {\n    if (this._sections[sectionId] && this._sections[sectionId].configuration) {\n      this._sections[sectionId].configuration.disabled = false;\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Pause navigation\n   */\n  public pause (): void {\n    this._pause = true;\n  }\n\n  /**\n   * Resume navigation\n   */\n  public resume (): void {\n    this._pause = false;\n  }\n\n  /**\n   * Focus an element\n   * @param element element to focus (section id or selector), (an element or a section)\n   * @param silent ?\n   * @param direction incoming direction\n   * @returns true if element has been focused, false otherwise\n   */\n  public focus (element: string, silent: boolean, direction: Direction): boolean {\n    let result = false;\n    const autoPause = !this._pause && silent;\n    if (autoPause) this.pause();\n\n    if (this.isSection(element)) {\n      result = this.focusSection(element, direction);\n    } else {\n      result = this.focusExtendedSelector(element, direction, false);\n    }\n\n    if (autoPause) this.resume();\n    return result;\n  }\n\n  /**\n   * Move to another element\n   * @param direction - incoming direction\n   * @param selector - target element selector\n   */\n  public move (direction: Direction, selector: string | undefined): boolean {\n    let element: HTMLElement | undefined = undefined;\n    if (selector) {\n      const elements = this.core.parseSelector(selector);\n      if (elements.length > 0) {\n        element = this.core.parseSelector(selector)[0] as HTMLElement;\n      }\n    } else {\n      element = this.getCurrentFocusedElement();\n    }\n\n    if (!element) {\n      return false;\n    }\n\n    const sectionId = this.getSectionId(element);\n    if (!sectionId) {\n      return false;\n    }\n\n    const willmoveProperties = {\n      direction,\n      sectionId,\n      cause: 'api'\n    };\n\n    if (!this.fireEvent(element, 'willmove', willmoveProperties, undefined)) {\n      return false;\n    }\n    return this.focusNext(direction, element, sectionId);\n  }\n\n  /**\n   * Make a section focusable (more precisely, all its focusable children are made focusable)\n   * @param sectionId id of the section to make focusable, undefined if you want to make all sections focusable\n   */\n  public makeFocusable (sectionId: string | undefined): void | never {\n    if (sectionId) {\n      if (this._sections[sectionId]) {\n        this.doMakeFocusable(this._sections[sectionId].configuration);\n      } else {\n        throw new Error(`Section \"${sectionId}\" doesn't exist!`);\n      }\n    } else {\n      for (const id in this._sections) {\n        this.doMakeFocusable(this._sections[id].configuration);\n      }\n    }\n  }\n\n  /**\n   * Set the default section\n   * @param sectionId id of the section to set as default\n   */\n  public setDefaultSection (sectionId: string): void | never {\n    if (this._sections[sectionId] !== undefined) {\n      this._defaultSectionId = sectionId;\n    } else {\n      throw new Error(`Section \"${sectionId}\" doesn't exist!`);\n    }\n  }\n\n  /**\n   * Focus an element\n   */\n  public focusElement (element: HTMLElement): boolean {\n    if (!element) return false;\n    const nextSectionId = this.getSectionId(element);\n    if (!nextSectionId) return false;\n    const currentFocusedElement = this.getCurrentFocusedElement();\n    let enterIntoNewSection = true;\n    if (currentFocusedElement) {\n      const currentSectionId = this.getSectionId(currentFocusedElement);\n      enterIntoNewSection = nextSectionId === currentSectionId;\n    }\n    if (this.isNavigable(element, nextSectionId, false)) {\n      return this._focusElement(element, nextSectionId, enterIntoNewSection, Direction.UP);\n    }\n    return false;\n  }\n  // #endregion\n\n  // #region PRIVATE FUNCTIONS\n\n  /**\n   * Generate a unique id for a section\n   * @returns new id section\n   */\n  private generateId (): string {\n    let id: string;\n    while (true) {\n      id = this.ID_POOL_PREFIX + String(++this._idPool);\n      if (!this._sections[id]) {\n        break;\n      }\n    }\n    return id;\n  }\n\n  private getCurrentFocusedElement (): HTMLElement | undefined {\n    const { activeElement } = document;\n    if (activeElement && activeElement !== document.body) {\n      return activeElement as HTMLElement;\n    }\n    return undefined;\n  }\n\n  private extend (out: any, ...args: any) {\n    out = out || {};\n    for (let i = 1; i < args.length; i++) {\n      if (!args[i]) {\n        continue;\n      }\n      for (const key in args[i]) {\n        if (args[i].hasOwnProperty(key) && args[i][key] !== undefined) {\n          out[key] = args[i][key];\n        }\n      }\n    }\n    return out;\n  }\n\n  private exclude (elemList: any, excludedElem: any) {\n    if (!Array.isArray(excludedElem)) {\n      excludedElem = [excludedElem];\n    }\n    for (let i = 0, index; i < excludedElem.length; i++) {\n      index = elemList.indexOf(excludedElem[i]);\n      if (index >= 0) {\n        elemList.splice(index, 1);\n      }\n    }\n    return elemList;\n  }\n\n  /**\n   * Check if an element is navigable\n   * @param elem element to check\n   * @param sectionId id of the element's section\n   * @param verifySectionSelector if true, check the section selector\n   * @returns true if element is navigable, false otherwise\n   */\n  private isNavigable (elem: HTMLElement, sectionId: string, verifySectionSelector: boolean): boolean {\n    if (!elem || !sectionId || !this._sections[sectionId] || this._sections[sectionId].configuration.disabled) {\n      return false;\n    }\n    if ((elem.offsetWidth <= 0 && elem.offsetHeight <= 0) || elem.hasAttribute('disabled')) {\n      return false;\n    }\n    if (verifySectionSelector && !this.core.matchSelector(elem, this._sections[sectionId].configuration.selector!)) {\n      return false;\n    }\n    if (this._sections[sectionId].configuration.navigableFilter !== null) {\n      if (this._sections[sectionId].configuration.navigableFilter!(elem, sectionId) === false) {\n        return false;\n      }\n    } else if (this.globalConfiguration.navigableFilter !== null) {\n      if (this.globalConfiguration.navigableFilter!(elem, sectionId) === false) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Get the element's section id\n   * @param element element\n   * @returns the element's section id\n   */\n  private getSectionId (element: HTMLElement): string | undefined {\n    const sectionsElements: any = {};\n    for (const id in this._sections) {\n      if (!this._sections[id].configuration.disabled) {\n        const sectionElement = this._sections[id].configuration.element;\n        if (sectionElement) {\n          sectionsElements[id] = sectionElement;\n        } else {\n          if (this._sections[id].configuration.selector !== '' && this._sections[id].configuration.selector !== undefined) {\n            const elementWithSelector = this.core.parseSelector(`[data-section-id=\"${id}\"]`)[0]\n            if (elementWithSelector) {\n              sectionsElements[id] = elementWithSelector;\n            }\n          }\n        }\n      }\n    }\n\n    let parent: HTMLElement | null = element;\n    while (parent) {\n      if (Object.values(sectionsElements).indexOf(parent) > -1) {\n        return Object.keys(sectionsElements).find((key) => sectionsElements[key] === parent);\n      }\n      parent = parent.parentElement;\n    }\n    return undefined;\n  }\n\n  /**\n   * Get navigable elements into a section\n   * @param sectionId id of the section\n   */\n  private getSectionNavigableElements (sectionId: string): never[] {\n    return this.core.parseSelector(this._sections[sectionId].configuration.selector!)\n      .filter((element) => this.isNavigable(element, sectionId, false));\n  }\n\n  /**\n   * Get the default element of a section\n   * @param sectionId id of the section\n   * @returns the default element of a section, null if no default element found\n   */\n  private getSectionDefaultElement (sectionId: string): HTMLElement | null {\n    const { defaultElement } = this._sections[sectionId].configuration;\n    if (!defaultElement) {\n      return null;\n    }\n    const elements = this.core.parseSelector(defaultElement);\n    // check each element to see if it's navigable and stop when one has been found\n    for (const element of elements) {\n      if (this.isNavigable(element, sectionId, true)) {\n        return element as HTMLElement;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Get the last focused element into a section\n   * @param sectionId id of the section\n   * @returns the last focused element, null if no element found\n   */\n  private getSectionLastFocusedElement (sectionId: any): HTMLElement | null {\n    const { lastFocusedElement } = this._sections[sectionId];\n    if (lastFocusedElement) {\n      if (!this.isNavigable(lastFocusedElement, sectionId, true)) {\n        return null;\n      }\n      return lastFocusedElement;\n    }\n    return null;\n  }\n\n  /**\n   * fire an event\n   * @param element element source\n   * @param type type of event\n   * @param details ?\n   * @param cancelable true if cancelable, false otherwise\n   * @returns true if event has been successfully dispatched\n   */\n  private fireEvent (element: HTMLElement, type: string, details: any, cancelable?: boolean): boolean {\n    if (arguments.length < 4) {\n      cancelable = true;\n    }\n    const evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(this.EVENT_PREFIX + type, true, cancelable, details);\n    return element.dispatchEvent(evt);\n  }\n\n  /**\n   * focus and scroll on element\n   * @param element element to focus\n   * @param sectionId id of the section containing the element\n   * @param enterIntoNewSection true if we enter into the section, false otherwise\n   */\n  private focusNScroll (element: HTMLElement, sectionId: string, enterIntoNewSection: boolean): void {\n    let scrollOptions = enterIntoNewSection ? this._sections[sectionId].configuration.scrollOptions\n      : this._sections[sectionId].configuration.scrollOptionsIntoSection;\n    // if no-scroll given as scrollOptions, then focus without scrolling\n    if (scrollOptions === 'no-scroll') {\n      element.focus({ preventScroll: true });\n    } else if (scrollOptions !== undefined && scrollOptions !== '' && !(scrollOptions instanceof String)) {\n      element.focus({ preventScroll: true });\n      element.scrollIntoView(scrollOptions as ScrollIntoViewOptions);\n    } else if (this.globalConfiguration) {\n      scrollOptions = enterIntoNewSection ? this.globalConfiguration.scrollOptions : this.globalConfiguration.scrollOptionsIntoSection;\n      if (scrollOptions !== undefined && scrollOptions !== '' && scrollOptions !== 'no-scroll') {\n        element.focus({ preventScroll: true });\n        element.scrollIntoView(scrollOptions as ScrollIntoViewOptions);\n      } else {\n        element.focus({ preventScroll: true });\n      }\n    } else {\n      element.focus();\n    }\n  }\n\n  /**\n   *\n   * @param elem\n   * @param sectionId\n   */\n  private focusChanged (element: HTMLElement, sectionId: string) {\n    let id: string | undefined = sectionId;\n    if (!id) {\n      id = this.getSectionId(element);\n    }\n    if (id) {\n      this._sections[sectionId].lastFocusedElement = element;\n      this._lastSectionId = sectionId;\n    }\n  }\n\n  private silentFocus (element: HTMLElement, sectionId: string, scrollIntoNewSection: boolean) {\n    const currentFocusedElement: HTMLElement | undefined = this.getCurrentFocusedElement();\n    if (currentFocusedElement) {\n      currentFocusedElement.blur();\n    }\n    this.focusNScroll(element, sectionId, scrollIntoNewSection);\n    this.focusChanged(element, sectionId);\n  }\n\n  /**\n   * Focus an element\n   * @param elem element to focus\n   * @param sectionId id of the element's section\n   * @param enterIntoNewSection true if new section is focused, false otherwise\n   * @param direction source direction\n   */\n  private _focusElement (element: HTMLElement, sectionId: string, enterIntoNewSection: boolean, direction?: Direction) {\n    if (!element) {\n      return false;\n    }\n    const currentFocusedElement: HTMLElement | undefined = this.getCurrentFocusedElement();\n\n    if (this._duringFocusChange) {\n      this.silentFocus(element, sectionId, enterIntoNewSection);\n      return true;\n    }\n\n    this._duringFocusChange = true;\n\n    if (this._pause) {\n      this.silentFocus(element, sectionId, enterIntoNewSection);\n      this._duringFocusChange = false;\n      return true;\n    }\n\n    if (currentFocusedElement) {\n      const unfocusProperties = {\n        nextElement: element,\n        nextSectionId: sectionId,\n        direction,\n        native: false\n      };\n      if (!this.fireEvent(currentFocusedElement, 'willunfocus', unfocusProperties, undefined)) {\n        this._duringFocusChange = false;\n        return false;\n      }\n      currentFocusedElement.blur();\n      this.fireEvent(currentFocusedElement, 'unfocused', unfocusProperties, false);\n    }\n\n    const focusProperties = {\n      previousElement: currentFocusedElement,\n      sectionId,\n      direction,\n      native: false\n    };\n    if (!this.fireEvent(element, 'willfocus', focusProperties)) {\n      this._duringFocusChange = false;\n      return false;\n    }\n    this.focusNScroll(element, sectionId, enterIntoNewSection);\n    this.fireEvent(element, 'focused', focusProperties, false);\n\n    this._duringFocusChange = false;\n\n    this.focusChanged(element, sectionId);\n    return true;\n  }\n  private focusExtendedSelector (selector: string, direction: Direction, enterIntoNewSection: boolean): boolean {\n    if (selector.charAt(0) === '@') {\n      if (selector.length === 1) {\n        return this.focusSection(undefined, direction);\n      }\n      const sectionId = selector.substr(1);\n      return this.focusSection(sectionId, direction);\n    }\n    const next = this.core.parseSelector(selector)[0];\n    if (next) {\n      const nextSectionId = this.getSectionId(next);\n      if (nextSectionId) {\n        if (this.isNavigable(next, nextSectionId, false)) {\n          return this._focusElement(next, nextSectionId, enterIntoNewSection, direction);\n        }\n      } else {\n        return false;\n      }\n    }\n    return false;\n  }\n\n  private addRange (id: string, range: string []) {\n    if (id && range.indexOf(id) < 0 && this._sections[id] && !this._sections[id].configuration.disabled) {\n      range.push(id);\n    }\n  }\n\n  /**\n   * Focus a section\n   * @param sectionId id of the section\n   * @param direction direction\n   * @returns true if section has been focused\n   */\n  private focusSection (sectionId: string | undefined, direction: Direction): boolean {\n    const range: string [] = [];\n\n    if (sectionId) {\n      this.addRange(sectionId, range);\n    } else {\n      this.addRange(this._defaultSectionId, range);\n      this.addRange(this._lastSectionId, range);\n      for (const section in this._sections) {\n        this.addRange(section, range);\n      }\n    }\n\n    for (let i = 0; i < range.length; i++) {\n      const id = range[i];\n      let next;\n\n      if (this._sections[id].configuration.enterTo === 'last-focused') {\n        next = this.getSectionLastFocusedElement(id)\n               || this.getSectionDefaultElement(id)\n               || this.getSectionNavigableElements(id)[0];\n      } else {\n        next = this.getSectionDefaultElement(id)\n               || this.getSectionLastFocusedElement(id)\n               || this.getSectionNavigableElements(id)[0];\n      }\n\n      if (next) {\n        return this._focusElement(next, id, true, direction);\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Fire event when navigate has failed\n   * @param element element source\n   * @param direction direction source\n   * @returns true if event has been successfully raised\n   */\n  private fireNavigateFailed (element: HTMLElement, direction: Direction) {\n    return this.fireEvent(element, 'navigatefailed', {\n      direction\n    }, false);\n  }\n\n  private goToLeaveFor (sectionId: string, direction: Direction) {\n    if (this._sections[sectionId].configuration.leaveFor\n      && (this._sections[sectionId].configuration.leaveFor as any)[directiontoString(direction)] !== undefined) {\n      const next = (this._sections[sectionId].configuration.leaveFor as any)[directiontoString(direction)];\n      if (next === '' || next === 'nowhere') {\n        return null;\n      }\n      return this.focusExtendedSelector(next, direction, true);\n    }\n    return false;\n  }\n\n  /**\n   * Focus next element\n   * @param direction source direction\n   * @param currentFocusedElement current focused element\n   * @param currentSectionId current section id\n   * @returns true if next has been focused successfully\n   */\n  private focusNext (direction: Direction, currentFocusedElement: HTMLElement, currentSectionId: string): boolean {\n    const extSelector = currentFocusedElement.getAttribute(`data-sn-${direction}`);\n\n    // TO DO remove typeof\n    if (typeof extSelector === 'string') {\n      if (extSelector === ''\n          || !this.focusExtendedSelector(extSelector, direction, false)) { // whhich value for enterIntoNewSection ? true or false ???\n        this.fireNavigateFailed(currentFocusedElement, direction);\n        return false;\n      }\n      return true;\n    }\n\n    const sectionNavigableElements: any = {};\n    let allNavigableElements: any = [];\n    for (const id in this._sections) {\n      sectionNavigableElements[id] = this.getSectionNavigableElements(id) as HTMLElement[];\n      allNavigableElements = allNavigableElements.concat(sectionNavigableElements[id]);\n    }\n\n    // const config: Configuration = this.extend({}, this.globalConfiguration, this._sections[currentSectionId].configuration);\n    let next: HTMLElement | null;\n    const currentSection = this._sections[currentSectionId];\n\n    if (currentSection.configuration.restrict === 'self-only' || currentSection.configuration.restrict === 'self-first') {\n      const currentSectionNavigableElements = sectionNavigableElements[currentSectionId];\n\n      next = this.core.navigate(\n        currentFocusedElement,\n        direction,\n        this.exclude(currentSectionNavigableElements, currentFocusedElement),\n        currentSection\n      );\n\n      if (!next && currentSection.configuration.restrict === 'self-first') {\n        next = this.core.navigate(\n          currentFocusedElement,\n          direction,\n          this.exclude(allNavigableElements, currentSectionNavigableElements),\n          currentSection\n        );\n      }\n    } else {\n      next = this.core.navigate(\n        currentFocusedElement,\n        direction,\n        this.exclude(allNavigableElements, currentFocusedElement),\n        currentSection\n      );\n    }\n\n    if (next) {\n      currentSection.previous = {\n        target: currentFocusedElement,\n        destination: next,\n        reverse: getReverseDirection(direction)\n      };\n\n      const nextSectionId: string | undefined = this.getSectionId(next);\n      let enterIntoNewSection = false;\n      if (currentSectionId !== nextSectionId && nextSectionId !== undefined) {\n        // We enter into another section\n        enterIntoNewSection = true;\n        const result: boolean | null = this.goToLeaveFor(currentSectionId, direction);\n        if (result) {\n          return true;\n        }\n        if (result === null) {\n          this.fireNavigateFailed(currentFocusedElement, direction);\n          return false;\n        }\n\n        let enterToElement: HTMLElement | null = null;\n        switch (this._sections[nextSectionId].configuration.enterTo) {\n          case 'last-focused':\n            enterToElement = this.getSectionLastFocusedElement(nextSectionId)\n                             || this.getSectionDefaultElement(nextSectionId);\n            break;\n          case 'default-element':\n            enterToElement = this.getSectionDefaultElement(nextSectionId);\n            break;\n          default:\n            break;\n        }\n        if (enterToElement) {\n          next = enterToElement;\n        }\n      }\n\n      if (nextSectionId) {\n        return this._focusElement(next, nextSectionId, enterIntoNewSection, direction);\n      }\n      return false;\n    }\n    if (this.goToLeaveFor(currentSectionId, direction)) {\n      return true;\n    }\n    this.fireNavigateFailed(currentFocusedElement, direction);\n    return false;\n  }\n\n  private preventDefault (evt: Event): boolean {\n    evt.preventDefault();\n    evt.stopPropagation();\n    return false;\n  }\n\n  private onKeyDown (evt: KeyboardEvent): boolean {\n    if (this._throttle) {\n      this.preventDefault(evt);\n      return false;\n    }\n\n    this._throttle = window.setTimeout(() => {\n      this._throttle = null;\n    }, this.globalConfiguration.throttle);\n\n    if (!this._sectionCount || this._pause\n      || evt.altKey || evt.ctrlKey || evt.metaKey || evt.shiftKey) {\n      return false;\n    }\n\n    let currentFocusedElement: HTMLElement | null | undefined;\n\n    const direction: Direction = evt.keyCode as unknown as Direction;\n    if (!direction) {\n      if (evt.keyCode === 13) {\n        currentFocusedElement = this.getCurrentFocusedElement();\n        if (currentFocusedElement && this.getSectionId(currentFocusedElement)) {\n          if (!this.fireEvent(currentFocusedElement, 'enter-down', undefined, undefined)) {\n            return this.preventDefault(evt);\n          }\n        }\n      }\n      return false;\n    }\n\n    currentFocusedElement = this.getCurrentFocusedElement();\n\n    if (!currentFocusedElement) {\n      if (this._lastSectionId) {\n        currentFocusedElement = this.getSectionLastFocusedElement(this._lastSectionId);\n      }\n      if (!currentFocusedElement) {\n        this.focusSection(undefined, direction);\n        return this.preventDefault(evt);\n      }\n    }\n\n    const currentSectionId = this.getSectionId(currentFocusedElement);\n    if (!currentSectionId) {\n      return false;\n    }\n\n    const willmoveProperties = {\n      direction,\n      sectionId: currentSectionId,\n      cause: 'keydown'\n    };\n\n    if (this.fireEvent(currentFocusedElement, 'willmove', willmoveProperties)) {\n      this.focusNext(direction, currentFocusedElement, currentSectionId);\n    }\n\n    return this.preventDefault(evt);\n  }\n\n  private onKeyUp (evt: KeyboardEvent): void {\n    if (evt.altKey || evt.ctrlKey || evt.metaKey || evt.shiftKey) {\n      return;\n    }\n    if (!this._pause && this._sectionCount && evt.keyCode === 13) {\n      const currentFocusedElement = this.getCurrentFocusedElement();\n      if (currentFocusedElement && this.getSectionId(currentFocusedElement)) {\n        if (!this.fireEvent(currentFocusedElement, 'enter-up', undefined, undefined)) {\n          evt.preventDefault();\n          evt.stopPropagation();\n        }\n      }\n    }\n  }\n\n  private onFocus (evt: Event): void {\n    const { target } = evt;\n    const htmlTarget: HTMLElement = target as HTMLElement;\n    if (target !== window && target !== document\n      && this._sectionCount && !this._duringFocusChange && target) {\n      const sectionId = this.getSectionId(htmlTarget);\n      if (sectionId) {\n        if (this._pause) {\n          this.focusChanged(htmlTarget, sectionId);\n          return;\n        }\n\n        const focusProperties = {\n          sectionId,\n          native: true\n        };\n\n        if (!this.fireEvent(htmlTarget, 'willfocus', focusProperties)) {\n          this._duringFocusChange = true;\n          htmlTarget.blur();\n          this._duringFocusChange = false;\n        } else {\n          this.fireEvent(htmlTarget, 'focused', focusProperties, false);\n          this.focusChanged(htmlTarget, sectionId);\n        }\n      }\n    }\n  }\n\n  private onBlur (evt: Event): void {\n    const target: EventTarget | null = evt.target;\n    const htmlTarget: HTMLElement = target as HTMLElement;\n    if (target !== window && target !== document && !this._pause\n      && this._sectionCount && !this._duringFocusChange && this.getSectionId(htmlTarget)) {\n      const unfocusProperties = {\n        native: true\n      };\n      if (!this.fireEvent(htmlTarget, 'willunfocus', unfocusProperties)) {\n        this._duringFocusChange = true;\n        setTimeout(() => {\n          htmlTarget.focus();\n          this._duringFocusChange = false;\n        });\n      } else {\n        this.fireEvent(htmlTarget, 'unfocused', unfocusProperties, false);\n      }\n    }\n  }\n\n  private isSection (sectionId: string | undefined): boolean {\n    if (sectionId) {\n      return sectionId in this._sections;\n    }\n    return false;\n  }\n  // TO REMOVE ???\n  private onBodyClick () {\n    if (this._sections[this._lastSectionId]) {\n      const lastFocusedElement = this._sections[this._lastSectionId].lastFocusedElement;\n      if (document.activeElement === document.body && this._lastSectionId\n        && lastFocusedElement) {\n        this._focusElement(lastFocusedElement, this._lastSectionId, true, undefined);\n      }\n    }\n  }\n\n  /**\n   * Make focusable elements of a section.\n   * @param configuration configuration of the section to male focusable ?\n   */\n  private doMakeFocusable (configuration: Configuration): void {\n    let tabIndexIgnoreList: string;\n    if (configuration.tabIndexIgnoreList !== undefined) {\n      tabIndexIgnoreList = configuration.tabIndexIgnoreList;\n    } else {\n      tabIndexIgnoreList = this.globalConfiguration.tabIndexIgnoreList!;\n    }\n\n    this.core.parseSelector(configuration.selector!).forEach((element: HTMLElement) => {\n      if (!this.core.matchSelector(element, tabIndexIgnoreList)) {\n        const htmlElement = element as HTMLElement;\n        if (!htmlElement.getAttribute('tabindex')) {\n          // set the tabindex with a negative value. https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex\n          htmlElement.setAttribute('tabindex', '-1');\n        }\n      }\n    });\n  }\n  // #endregion\n}\n\nconst sn = Compass.getInstance();\nexport { Compass, sn };\n","import { Direction } from './types/Direction';\nimport { Rectangle, ElementRectangle, ElementRectangleImpl } from './types/ElementRectangle';\nimport { Priority } from './types/Priority';\nimport { Section } from './types/Section';\n\nif (!Element.prototype.matches) {\n  Element.prototype.matches = (Element.prototype as any).matchesSelector\n    || (Element.prototype as any).mozMatchesSelector\n    || (Element.prototype as any).msMatchesSelector\n    || (Element.prototype as any).oMatchesSelector\n    || (Element.prototype as any).webkitMatchesSelector\n    || ((s) => {\n      if (this) {\n        const matches = ((this! as any).document || (this! as any).ownerDocument).querySelectorAll(s);\n        let i = matches.length;\n        while (--i >= 0 && matches.item(i) !== this) {}\n        return i > -1;\n      }\n      return false;\n    });\n}\n\nclass Core {\n  private static instance: Core;\n\n  public static getInstance (): Core {\n    if (!Core.instance) {\n      Core.instance = new Core();\n    }\n    return Core.instance;\n  }\n\n  /**\n   * Get element rectangle\n   * @param element element\n   * @returns element rectangle\n   */\n  private getRect (element: HTMLElement): ElementRectangle {\n    const cr: DOMRect = element.getBoundingClientRect();\n\n    const xCenter = cr.left + Math.floor(cr.width / 2);\n    const yCenter = cr.top + Math.floor(cr.height / 2);\n    const center: Rectangle = {\n      x: xCenter,\n      y: yCenter,\n      left: xCenter,\n      right: xCenter,\n      top: yCenter,\n      bottom: yCenter,\n      width: 0,\n      height: 0\n    };\n    return {\n      element,\n      x: cr.x,\n      y: cr.y,\n      left: cr.left,\n      top: cr.top,\n      right: cr.right,\n      bottom: cr.bottom,\n      width: cr.width,\n      height: cr.height,\n      center\n    };\n  }\n\n  /**\n   * Get the distribution of elements around a target element\n   * This function returns a two-dimensional array, we first dimension = 9 of element rectangle.\n   * Index of arrays corresponds to the position of elements.\n   * Link between index and position : (for threshold = 0)\n   *\n   *    _______  -  _______  -  _______\n   *   |       | - |       | - |       |\n   *   |   0   | - |   1   | - |   2   |\n   *   |_______| - |_______| - |_______|\n   * -------------------------------------\n   *    _______  -  _______  -  _______\n   *   |       | - |       | - |       |\n   *   |   3   | - | TARG. | - |   5   |\n   *   |_______| - |_______| - |_______|\n   *             -           -\n   * -------------------------------------\n   *    _______  -  _______  -  _______\n   *   |       | - |       | - |       |\n   *   |   6   | - |   7   | - |   8   |\n   *   |_______| - |_______| - |_______|\n   *             -           -\n   * @param rects rectangle of elements around the target\n   * @param targetRect rectangle of target element\n   * @param straightOverlapThreshold threshold\n   * @returns distribution of elements around a target element\n   */\n  private partition (rects: ElementRectangle[], targetRect: Rectangle, straightOverlapThreshold: number): ElementRectangle[][] {\n    const groups: ElementRectangle[][] = [[], [], [], [], [], [], [], [], []];\n\n    for (let i = 0; i < rects.length; i++) {\n      const rect = rects[i];\n      const center = rect.center;\n      let x, y;\n\n      if (center.x < targetRect.left) {\n        x = 0;\n      } else if (center.x <= targetRect.right) {\n        x = 1;\n      } else {\n        x = 2;\n      }\n\n      if (center.y < targetRect.top) {\n        y = 0;\n      } else if (center.y <= targetRect.bottom) {\n        y = 1;\n      } else {\n        y = 2;\n      }\n\n      const groupId = y * 3 + x;\n      groups[groupId].push(rect);\n\n      if ([0, 2, 6, 8].indexOf(groupId) !== -1) {\n        const threshold = straightOverlapThreshold;\n\n        if (rect.left <= targetRect.right - targetRect.width * threshold) {\n          if (groupId === 2) {\n            groups[1].push(rect);\n          } else if (groupId === 8) {\n            groups[7].push(rect);\n          }\n        }\n\n        if (rect.right >= targetRect.left + targetRect.width * threshold) {\n          if (groupId === 0) {\n            groups[1].push(rect);\n          } else if (groupId === 6) {\n            groups[7].push(rect);\n          }\n        }\n\n        if (rect.top <= targetRect.bottom - targetRect.height * threshold) {\n          if (groupId === 6) {\n            groups[3].push(rect);\n          } else if (groupId === 8) {\n            groups[5].push(rect);\n          }\n        }\n\n        if (rect.bottom >= targetRect.top + targetRect.height * threshold) {\n          if (groupId === 0) {\n            groups[3].push(rect);\n          } else if (groupId === 2) {\n            groups[5].push(rect);\n          }\n        }\n      }\n    }\n    return groups;\n  }\n\n  private prioritize (priorities: Priority[]): ElementRectangle[] | null {\n    let destPriority = null;\n    for (let i = 0; i < priorities.length; i++) {\n      if (priorities[i].group.length) {\n        destPriority = priorities[i];\n        break;\n      }\n    }\n\n    if (!destPriority) {\n      return null;\n    }\n\n    const destDistance = destPriority.distance;\n    const target = destPriority.target;\n    destPriority.group.sort((a: ElementRectangle, b: ElementRectangle) => {\n      for (let i = 0; i < destDistance.length; i++) {\n        const distance = destDistance[i];\n        const delta = distance(a, target) - distance(b, target);\n        if (delta) {\n          return delta;\n        }\n      }\n      return 0;\n    });\n    return destPriority.group;\n  }\n\n  /**\n   * Get next element to navigate to, from a target according to a direction\n   * @param target target element\n   * @param direction navigate to this direction\n   * @param candidates candidates elements around target\n   * @param section section of the target\n   * @returns next element to navigate to, null if no next element found\n   */\n  public navigate (target: HTMLElement, direction: Direction, candidates: HTMLElement[], section: Section): HTMLElement | null {\n    if (!target || !direction || !candidates || !candidates.length) {\n      return null;\n    }\n\n    const rects: ElementRectangle[] = [];\n    for (let i = 0; i < candidates.length; i++) {\n      const rect = this.getRect(candidates[i]);\n      if (rect) {\n        rects.push(rect);\n      }\n    }\n    if (!rects.length) return null;\n    const targetRect: ElementRectangle = this.getRect(target);\n\n    if (!targetRect) return null;\n    const targetRectImpl: ElementRectangleImpl = new ElementRectangleImpl(targetRect);\n\n    const groups = this.partition(rects, targetRect, section.configuration.straightOverlapThreshold!);\n    const internalGroups = this.partition(groups[4], targetRect.center, section.configuration.straightOverlapThreshold!);\n\n    let priorities: Priority[];\n\n    switch (direction) {\n      case Direction.LEFT:\n        priorities = [\n          {\n            group: internalGroups[0].concat(internalGroups[3])\n              .concat(internalGroups[6]),\n            distance: [\n              targetRectImpl.nearPlumbLineIsBetter,\n              targetRectImpl.topIsBetter\n            ],\n            target: targetRectImpl\n          },\n          {\n            group: groups[3],\n            distance: [\n              targetRectImpl.nearPlumbLineIsBetter,\n              targetRectImpl.topIsBetter\n            ],\n            target: targetRectImpl\n          },\n          {\n            group: groups[0].concat(groups[6]),\n            distance: [\n              targetRectImpl.nearHorizonIsBetter,\n              targetRectImpl.rightIsBetter,\n              targetRectImpl.nearTargetTopIsBetter\n            ],\n            target: targetRectImpl\n          }\n        ];\n        break;\n      case Direction.RIGHT:\n        priorities = [\n          {\n            group: internalGroups[2].concat(internalGroups[5])\n              .concat(internalGroups[8]),\n            distance: [\n              targetRectImpl.nearPlumbLineIsBetter,\n              targetRectImpl.topIsBetter\n            ],\n            target: targetRectImpl\n          },\n          {\n            group: groups[5],\n            distance: [\n              targetRectImpl.nearPlumbLineIsBetter,\n              targetRectImpl.topIsBetter\n            ],\n            target: targetRectImpl\n          },\n          {\n            group: groups[2].concat(groups[8]),\n            distance: [\n              targetRectImpl.nearHorizonIsBetter,\n              targetRectImpl.leftIsBetter,\n              targetRectImpl.nearTargetTopIsBetter\n            ],\n            target: targetRectImpl\n          }\n        ];\n        break;\n      case Direction.UP:\n        priorities = [\n          {\n            group: internalGroups[0].concat(internalGroups[1])\n              .concat(internalGroups[2]),\n            distance: [\n              targetRectImpl.nearHorizonIsBetter,\n              targetRectImpl.leftIsBetter\n            ],\n            target: targetRectImpl\n          },\n          {\n            group: groups[1],\n            distance: [\n              targetRectImpl.nearHorizonIsBetter,\n              targetRectImpl.leftIsBetter\n            ],\n            target: targetRectImpl\n          },\n          {\n            group: groups[0].concat(groups[2]),\n            distance: [\n              targetRectImpl.nearPlumbLineIsBetter,\n              targetRectImpl.bottomIsBetter,\n              targetRectImpl.nearTargetLeftIsBetter\n            ],\n            target: targetRectImpl\n          }\n        ];\n        break;\n      case Direction.DOWN:\n        priorities = [\n          {\n            group: internalGroups[6].concat(internalGroups[7])\n              .concat(internalGroups[8]),\n            distance: [\n              targetRectImpl.nearHorizonIsBetter,\n              targetRectImpl.leftIsBetter\n            ],\n            target: targetRectImpl\n          },\n          {\n            group: groups[7],\n            distance: [\n              targetRectImpl.nearHorizonIsBetter,\n              targetRectImpl.leftIsBetter\n            ],\n            target: targetRectImpl\n          },\n          {\n            group: groups[6].concat(groups[8]),\n            distance: [\n              targetRectImpl.nearPlumbLineIsBetter,\n              targetRectImpl.topIsBetter,\n              targetRectImpl.nearTargetLeftIsBetter\n            ],\n            target: targetRectImpl\n          }\n        ];\n        break;\n      default:\n        return null;\n    }\n\n    if (section.configuration.straightOnly) {\n      priorities.pop();\n    }\n\n    const destGroup = this.prioritize(priorities);\n    if (!destGroup) {\n      return null;\n    }\n\n    let dest: HTMLElement | undefined = undefined;\n    if (section.configuration.rememberSource\n        && section.previous\n        && section.previous.destination === target\n        && section.previous.reverse === direction) {\n      for (let j = 0; j < destGroup.length; j++) {\n        if (destGroup[j].element === section.previous.target) {\n          dest = destGroup[j].element;\n          break;\n        }\n      }\n    }\n    if (!dest) dest = destGroup[0].element;\n    return dest;\n  }\n\n  /**\n   * Parse selector\n   * @param selector\n   * @returns nodes\n   */\n  public parseSelector (selector: string): never[] {\n    // TO DO handle selector\n    const result = [].slice.call(document.querySelectorAll(selector));\n    return result;\n  }\n\n  /**\n   * Check if an element match a selector\n   */\n  public matchSelector (element: HTMLElement, selector: string): boolean {\n    // TO DO selector as object N\n    return element.matches(selector);\n  }\n}\n\nconst core = Core.getInstance();\nexport { Core, core };\n","/**\n * Configuration interface, allows to configure Spatial Navigation behavior in a global or restricted way.\n */\ninterface Configuration {\n  element?: HTMLElement,\n  selector?: string,\n  straightOnly?: boolean,\n  straightOverlapThreshold?: number,\n  rememberSource?: boolean,\n  disabled?: boolean,\n  defaultElement?: string,\n  enterTo?: string, // '', 'last-focused', 'default-element'\n  leaveFor?: {\n    left?: string,\n    right?: string,\n    down?: string,\n    up?: string\n  },\n  restrict?: string, // 'self-first', 'self-only', 'none'\n  tabIndexIgnoreList?: string,\n  navigableFilter?: null | Function,\n  scrollOptions?: ScrollIntoViewOptions | string,\n  scrollOptionsIntoSection?: ScrollIntoViewOptions | string,\n  throttle?: number\n}\n\nconst defaultConfiguration: Configuration = {\n  selector: '[data-focusable=true]',\n  straightOnly: false,\n  straightOverlapThreshold: 0.5,\n  rememberSource: false,\n  disabled: false,\n  defaultElement: '',\n  enterTo: '',\n  leaveFor: {\n    left: undefined,\n    right: undefined,\n    down: undefined,\n    up: undefined\n  },\n  restrict: 'self-first',\n  tabIndexIgnoreList: 'a, input, select, textarea, button, iframe, [contentEditable=true]',\n  navigableFilter: null,\n  scrollOptions: {\n    behavior: 'smooth',\n    block: 'center',\n    inline: 'nearest'\n  },\n  scrollOptionsIntoSection: {\n    behavior: 'smooth',\n    block: 'center',\n    inline: 'nearest'\n  },\n  throttle: 0\n};\n\nexport { Configuration, defaultConfiguration };\n","/* eslint-disable no-shadow */\n/* eslint-disable no-unused-vars */\nexport enum Direction {\n  LEFT = 37,\n  UP = 38,\n  RIGHT = 39,\n  DOWN = 40\n}\n\nexport enum StringDirection {\n  LEFT = 'left',\n  UP = 'up',\n  RIGHT = 'right',\n  DOWN = 'down'\n}\n\nexport function getReverseDirection (direction: Direction): Direction {\n  if (direction === Direction.LEFT) {\n    return Direction.RIGHT;\n  } else if (direction === Direction.RIGHT) {\n    return Direction.LEFT;\n  } else if (direction === Direction.UP) {\n    return Direction.DOWN;\n  } else {\n    return Direction.UP;\n  }\n}\n\nexport function directiontoString (direction: Direction): string {\n  if (direction === Direction.LEFT) {\n    return 'left';\n  } else if (direction === Direction.RIGHT) {\n    return 'right';\n  } else if (direction === Direction.UP) {\n    return 'up';\n  } else {\n    return 'down';\n  }\n}\n","export interface Rectangle {\n  x: number,\n  y: number,\n  left: number,\n  top: number,\n  right: number,\n  bottom: number,\n  width: number,\n  height: number\n}\n\nexport interface ElementRectangle extends Rectangle {\n  element: HTMLElement\n\n  center: Rectangle\n}\n\nexport class ElementRectangleImpl implements ElementRectangle {\n  x: number;\n  y: number;\n  left: number;\n  top: number;\n  right: number;\n  bottom: number;\n  element: HTMLElement;\n  center: Rectangle;\n  width: number;\n  height: number;\n\n  constructor (rectangle: ElementRectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.left = rectangle.left;\n    this.right = rectangle.right;\n    this.bottom = rectangle.bottom;\n    this.top = rectangle.top;\n    this.element = rectangle.element;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    this.center = rectangle.center;\n  }\n\n  public nearPlumbLineIsBetter (rect: ElementRectangle, targetRect: ElementRectangle): number {\n    let distance: number;\n    if (rect.center.x < targetRect.center.x) {\n      distance = targetRect.center.x - rect.right;\n    } else {\n      distance = rect.left - targetRect.center.x;\n    }\n    return distance < 0 ? 0 : distance;\n  }\n\n  public nearHorizonIsBetter (rect: ElementRectangle, targetRect: ElementRectangle): number {\n    let distance: number;\n    if (rect.center.y < targetRect.center.y) {\n      distance = targetRect.center.y - rect.bottom;\n    } else {\n      distance = rect.top - targetRect.center.y;\n    }\n    return distance < 0 ? 0 : distance;\n  }\n\n  public nearTargetLeftIsBetter (rect: ElementRectangle, targetRect: ElementRectangle): number {\n    let distance: number;\n    if (rect.center.x < targetRect.center.x) {\n      distance = targetRect.left - rect.right;\n    } else {\n      distance = rect.left - targetRect.left;\n    }\n    return distance < 0 ? 0 : distance;\n  }\n\n  public nearTargetTopIsBetter (rect: ElementRectangle, targetRect: ElementRectangle): number {\n    let distance: number;\n    if (rect.center.y < targetRect.center.y) {\n      distance = targetRect.top - rect.bottom;\n    } else {\n      distance = rect.top - targetRect.top;\n    }\n    return distance < 0 ? 0 : distance;\n  }\n\n  public topIsBetter (rect: ElementRectangle): number {\n    return rect.top;\n  }\n\n  public bottomIsBetter (rect: ElementRectangle): number {\n    return -1 * rect.bottom;\n  }\n\n  public leftIsBetter (rect: ElementRectangle): number {\n    return rect.left;\n  }\n\n  public rightIsBetter (rect: ElementRectangle): number {\n    return -1 * rect.right;\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { App, Directive } from '@vue/runtime-core';\nimport { sn } from '../Boussole';\nimport 'focus-options-polyfill';\nimport 'scroll-behavior-polyfill';\nimport { Configuration, defaultConfiguration } from '../types/Configuration';\n\nconst vueModule = {\n  disable () {\n    sn.pause();\n  },\n  enable () {\n    sn.resume();\n  },\n  install (app: App, config: Configuration) {\n    const globalConfig = defaultConfiguration;\n    Object.assign(globalConfig, config);\n    sn.init();\n    sn.set(undefined, globalConfig as Configuration);\n    app.provide('$Compass', sn);\n\n    const assignConfig = (sectionId: string | undefined, config: Configuration): Configuration => {\n      const sectionConfig = ({ ...globalConfig }) as Configuration;\n      if (config) {\n        Object.assign(sectionConfig, config);\n      }\n      sectionConfig.selector = `[data-section-id=\"${sectionId}\"] [data-focusable=true]`;\n      return sectionConfig;\n    };\n\n    const focusSectionDirective: Directive<any, any> = {\n      beforeMount (element: HTMLElement, binding) {\n        let sectionId = null;\n        if (binding.value && binding.value.id && binding.value.conf) {\n          sectionId = binding.value.id;\n          const config = binding.value.conf as Configuration;\n          config.element = element;\n          try {\n            sn.add(sectionId, config);\n          } catch (error) {}\n        } else {\n          sectionId = sn.add(undefined, defaultConfiguration);\n        }\n\n        // set sectionid to data set for removing when unbinding\n        // set sectionid to data set for removing when unbinding\n        element.dataset['sectionId'] = sectionId;\n        sn.set(sectionId, assignConfig(sectionId, binding.value.conf));\n        // set default section\n        if (binding.modifiers['default']) {\n          sn.setDefaultSection(sectionId);\n        }\n      },\n      mounted (element: HTMLElement, binding) {\n        let sectionId = element.dataset['sectionId'];\n        if (binding.arg && sectionId !== binding.arg) {\n          sectionId = binding.arg;\n          element.dataset['sectionId'] = sectionId;\n        }\n      },\n      unmounted (element: HTMLElement) {\n        if (element.dataset['sectionId']) {\n          sn.remove(element.dataset['sectionId']);\n        }\n      }\n    };\n\n    // focus section directive\n    app.directive('focus-section', focusSectionDirective);\n\n    const disableSection = (sectionId: string, disable: boolean): void => {\n      if (disable === false) {\n        sn.enable(sectionId);\n      } else {\n        sn.disable(sectionId);\n      }\n    };\n\n    // diasble focus section directive\n    app.directive('disable-focus-section', {\n      beforeMount (el, binding) {\n        disableSection(el.dataset.sectionId, binding.value);\n      },\n      mounted (el, binding) {\n        disableSection(el.dataset.sectionId, binding.value);\n      }\n    });\n\n    const disableElement = (element: HTMLElement, focusable: any) => {\n      // eslint-disable-next-line no-unneeded-ternary\n      focusable = focusable === false ? false : true;\n      if (!element.dataset['focusable'] || element.dataset['focusable'] !== `${focusable}`) {\n        element.dataset['focusable'] = focusable;\n        if (focusable) element.tabIndex = -1;\n      }\n    };\n\n    // focusable directive\n    app.directive('focus', {\n      beforeMount (el, binding) {\n        disableElement(el, binding.value);\n      },\n      mounted (el, binding) {\n        disableElement(el, binding.value);\n      },\n      unmounted (el) {\n        el.removeAttribute('data-focusable');\n      }\n    });\n  }\n};\n\nexport {vueModule as compass}\n"],"names":[],"sourceRoot":""}